<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0053)http://www.ehcache.org/documentation/web_caching.html -->
<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <TITLE>Ehcache - Web Caching</TITLE>

    <STYLE type="text/css" media="all">
        @import url("../css/siteNew.css");

                    </STYLE>

        
    <META name="description" content="Ehcache is a widely used java distributed cache for general purpose caching,
            Java EE and light-weight containers. It features memory and disk stores, replicate by copy and invalidate,
            listeners, cache loaders, cache extensions, cache exception handlers, a gzip caching servlet filter, RESTful
            &amp; SOAP APIs and much more.  Ehcache is available under an Apache open source license and is actively developed,
            maintained and supported by Terracotta, Inc.">
    <SCRIPT id="widgetbox_lib_subscriber_main" type="text/javascript" async="true" src="./Ehcache - Web Caching_files/Main.js"></SCRIPT><SCRIPT src="./Ehcache - Web Caching_files/get_widget.js" id="widgetbox_getwidgetinfo_script_c93e7f59-6a67-4e8a-b22e-b736833c84d3" async="true"></SCRIPT></HEAD><BODY>

<DIV id="Wrapper">
    <DIV id="Container">


        <DIV id="Header">

            <DIV id="logo">
                <A href="http://ehcache.org/"><IMG src="./Ehcache - Web Caching_files/ehcache_logo.gif" alt="ehcache" width="294" height="60" border="0" vspace="22"></A>
            </DIV>

            <DIV id="nav">

                <DIV id="support"><A href="http://www.terracotta.org/ehcache/ehcache-dx?src=ehcacheSupportTab"><SPAN>Support</SPAN></A>
                </DIV>
                <DIV id="products"><A href="http://www.terracotta.org/products?source=ehcachebanner"><SPAN>Products</SPAN></A>
                </DIV>
                <DIV id="customers"><A href="http://www.ehcache.org/customers.html"><SPAN>Customers</SPAN></A>
                </DIV>
                <FORM method="GET" action="http://www.google.com/custom"><INPUT type="text" name="q" size="15" maxlength="255" value="">
                    <INPUT type="submit" name="sa" value="Search"><INPUT type="hidden" name="cof" value="GALT:#3C3E29;S:http://gregluck.com;VLC:#9C8E69;AH:left;BGC:white;LH:31;LC:#9C8E69;GFNT:#3C3E29;L:http://ehcache.org/images/ehcache_logo.gif;ALC:#9C8E69;LW:211;T:#4C4E39;GIMP:#3C3E29;AWFID:12c1e42dc993d5c6;"><INPUT type="hidden" name="domains" value="ehcache.org"><INPUT type="hidden" name="sitesearch" value="ehcache.org">
                </FORM>

                <DIV id="contact"><A href="http://www.terracotta.org/contact/?ehcache.org"><B>Contact
                    Us</B></A>&nbsp; | &nbsp;<A href="http://www.terracotta.org/dl/ehcache-oss-sign-up"><B>Download</B></A>
                </DIV>
                <DIV id="community">Terracotta Community: <A href="http://www.terracotta.org/account/register"><B>Register</B></A>&nbsp;
                    |
                    &nbsp;<A href="http://www.terracotta.org/account/login"><B>Login</B></A>
                </DIV>

            </DIV>


        </DIV>

        <DIV id="leftColumn">
            <DIV id="navColumn">
                        
    

    
        
        
    
        
                               <H5><IMG src="./Ehcache - Web Caching_files/arrow_open.png" width="13" height="13" hspace="6" alt="arrow">
            About</H5>
                        <UL>
                    
    <LI class="none">
                        <A href="http://www.ehcache.org/index.html">Overview</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/documentation/architecture.html">Architecture</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/features.html">Features</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/news.html">News</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/license.html">Project License</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/team-list.html">Project Team</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/nameandlogo.html">Name &amp; Logo</A>
            </LI>
              </UL>
                            <H5><IMG src="./Ehcache - Web Caching_files/arrow_open.png" width="13" height="13" hspace="6" alt="arrow">
            Code</H5>
                        <UL>
                    
    <LI class="none">
                        <A href="http://www.terracotta.org/dl/ehcache-oss-sign-up" class="externalLink">Download</A>
            </LI>
              
    <LI class="none">
                        <A href="http://oss.sonatype.org/content/repositories/sourceforge-releases/net/sf/ehcache/" class="externalLink">Maven Release Repository</A>
            </LI>
              
    <LI class="none">
                        <A href="http://oss.sonatype.org/content/repositories/sourceforge-snapshots/net/sf/ehcache/" class="externalLink">Maven Snapshot Repository</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/ehcache.xml">ehcache.xml</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/ehcache.xsd">ehcache.xsd</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/changes-report.html">Change logs</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/documentation/samples.html">Code Samples</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/source-repository.html">Source Repository</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/jxr.html">Browsable Source Code</A>
            </LI>
              
    <LI class="none">
                        <A href="http://fisheye2.atlassian.com/changelog/ehcache/" class="externalLink">Fisheye</A>
            </LI>
              </UL>
                            <H5><IMG src="./Ehcache - Web Caching_files/arrow_open.png" width="13" height="13" hspace="6" alt="arrow">
            Documentation</H5>
                        <UL>
                    
    <LI class="none">
                        <A href="http://www.ehcache.org/documentation/getting_started.html">Getting Started</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/documentation/index.html">User Guide [HTML]</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/documentation/EhcacheUserGuide-1.7.1.pdf">Ehcache Book [PDF]</A>
            </LI>
              
                            
                                        
                                    
                                    
                                    
                                    
                                    
                            
            <LI class="collapsed">
                        <A href="http://www.ehcache.org/documentation/older_guides.html">Earlier Versions [PDF]</A>
                        </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/apidocs/index.html">JavaDoc</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/documentation/faq.html">FAQ</A>
            </LI>
              </UL>
                            <H5><IMG src="./Ehcache - Web Caching_files/arrow_open.png" width="13" height="13" hspace="6" alt="arrow">
            Community</H5>
                        <UL>
                    
    <LI class="none">
                        <A href="http://www.ehcache.org/mail-lists.html">Mailing Lists</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/issue-tracking.html">Issue Tracking</A>
            </LI>
              
    <LI class="none">
                        <A href="http://forums.terracotta.org/forums/forums/show/16.page" class="externalLink">Forums</A>
            </LI>
              
    <LI class="none">
                        <A href="https://jira.terracotta.org/jira/browse/EHC" class="externalLink">Bugs</A>
            </LI>
              
    <LI class="none">
                        <A href="https://jira.terracotta.org/jira/browse/EHC" class="externalLink">Feature Requests</A>
            </LI>
              
    <LI class="none">
                        <A href="http://www.ehcache.org/customers.html">Who's Using?</A>
            </LI>
              
    <LI class="none">
                        <A href="http://gregluck.com/blog" class="externalLink">Maintainer's blog</A>
            </LI>
              
    <LI class="none">
                        <A href="http://cafepress.com/ehcache" class="externalLink">Ehcache Merchandise</A>
            </LI>
              </UL>
                        </DIV>
        </DIV>

        <DIV id="rightColumn">
            <H4>Quick Start</H4>
            <UL>
                <LI><A href="http://ehcache.org/documentation/getting_started.html">Getting
                    Started</A></LI>
                <LI><A href="http://ehcache.org/documentation/samples.html">Code Samples</A>
                </LI>
                <LI><A href="http://ehcache.org/evaluation_faq.html">Evaluation
                    FAQ</A></LI>
                <LI>
                    <A href="http://ehcache.org/benchmarks.html">Benchmarks</A>
                </LI>
                <LI><A href="http://ehcache.org/roadmap.html">Road Map</A></LI>
            </UL>
            <P>&nbsp;</P>

            <H4>Products &amp; Services</H4>
            <UL>
                <LI>
                    <A href="http://www.terracotta.org/ehcache">Ehcache
                        DX, EX and FX
                        &gt;&gt;</A></LI>
                <LI>
                    <A href="http://www.terracotta.org/ehcache/ehcache-dx?source=ehcachebanner">Support
                        &gt;&gt;</A></LI>
                <LI><A href="http://ehcache.org/training.html">Training &gt;&gt;</A></LI>
                <LI><A href="http://ehcache.org/EhcacheBrochure.pdf">Product Brochure
                    [PDF]</A></LI>
            </UL>
            <P>&nbsp;</P>

            <H4>Training Dates</H4>

            <DIV id="schedule">
                <B>US - San Francisco</B><BR>
                Feb 4-5, 2010
                <HR>
                Apr 29-30, 2010
                <HR>
                Jun 28-29, 2010
                <HR>
                Oct 6-7, 2010
                <HR>
                Nov 11-12, 2010
                <HR>
                Dec 2-3, 2010
                <HR>
                Feb 4-5, 2011
                <BR>
                <BR>
                <B>India - Delhi</B><BR>
                Feb 4-5, 2010
                <HR>
                June 17-18, 2010
                <HR>
                Dec 2-3, 2010
                <BR>
                <BR>
                See <A href="http://ehcache.org/training.html">training details</A>.

            </DIV>
            <P>&nbsp;</P>

            <H4>Blogs &amp; Tweets</H4>

            <DIV id="blog">
                <SCRIPT type="text/javascript" src="./Ehcache - Web Caching_files/InsertWidget.js"></SCRIPT>
                <SCRIPT>if (WIDGETBOX) WIDGETBOX.renderWidget('c93e7f59-6a67-4e8a-b22e-b736833c84d3');</SCRIPT><DIV id="widgetbox_widget_parent_0" style="line-height:0"><DIV id="widgetbox_widget_div_0"><EMBED src="http://cdn.widgetserver.com/syndication/flash/blidget/blidget.swf?cb=33124" width="185" height="600" type="application/x-shockwave-flash" id="widgetbox_widget_flash_0" name="widgetbox_widget_flash_0" allowscriptaccess="always" salign="tl" wmode="transparent" scale="noScale" bgcolor="FFFFFF" flashvars="wbx_stageHeight=500&amp;wbx_tab_1_default_image=http%3A%2F%2Ffiles.widgetbox.com%2Fservices%2Furl.gif&amp;wbx_hide_themes=true&amp;widget_loadVarsUrl=http%3A%2F%2Fcdn.widgetserver.com%2Fsyndication%2Floadvars%2Fi%2Fc93e7f59-6a67-4e8a-b22e-b736833c84d3%2Fiv%2F2%2Fn%2Fcode%2Fnv%2F4%2Fp%2F1%2Fr%2F5d89964a-4b41-4ffe-a841-354259224062%2Frv%2F24%2Ft%2F274081a24d9a35b0e273fc55ec54a9a43228829800000126b82d927c%2Fu%2F1%2F&amp;wbx_feed=http%3A%2F%2Fgregluck.com%2Fblogroll%2F%3Ffeed%3Drss2&amp;wbx_mainimage=http%3A%2F%2F2.bp.blogspot.com%2F_xg9Zr21WCyc%2FSpPcowqZB2I%2FAAAAAAAAAqU%2F-rBI7HtPQlk%2Fs320%2FPicture%2B1.png&amp;wbx_mainimage_height=214&amp;wbx_margin=12%208%2020%208&amp;wbx_blog=http%3A%2F%2Fgregluck.com%2Fblogroll&amp;wbx_align=left&amp;wbx_show_copyright=true&amp;wbx_stageWidth=160&amp;wbx_vn=75&amp;wbx_padding=0%200%200%200&amp;wbx_hostname=widgetserver.com&amp;wbx_orientation=custom&amp;wbx_assets=http%3A%2F%2Fcdn.widgetserver.com%2Fsyndication%2Fflash%2Fassets%2F&amp;wbx_show_title=none&amp;wbx_show_pubdate=true&amp;wbx_flb=1&amp;wbx_framerate=24&amp;wbx_theme=wbxtheme1&amp;wbx_mainimage_width=320&amp;wbx_show_post=headline%7Cimage&amp;wbx_show_summary=true&amp;wbx_title=Committers%20Blogs%2FTweets&amp;wbx_info_offset=-1%20-1%20TR&amp;widget_appId=c93e7f59-6a67-4e8a-b22e-b736833c84d3&amp;widget_regId=5d89964a-4b41-4ffe-a841-354259224062&amp;widget_friendlyId=blogroll-gregrluck&amp;widget_name=blogroll&amp;widget_token=274081a24d9a35b0e273fc55ec54a9a43228829800000126b82d927c&amp;widget_sid=658e9df9c77e27c6eb6a115a2a78b0ab&amp;widget_id=0&amp;widget_location=http%3A%2F%2Fwww.ehcache.org%2Fdocumentation%2Fweb_caching.html&amp;widget_timestamp=1265827467314&amp;widget_serviceLevel=1&amp;widget_provServiceLevel=1&amp;widget_instServiceLevel=0&amp;widget_width=185&amp;widget_height=600&amp;widget_wrapper=JAVASCRIPT&amp;widget_isAdFriendly=false&amp;widget_isAdEnabled=false&amp;widget_adPlacement=TL&amp;widget_appPK=139162062&amp;widget_regPK=3628803&amp;widget_providerPK=1713909&amp;widget_userPK=66119571" pluginspage="http://www.macromedia.com/go/getflashplayer"></DIV><DIV class="wbx-gw-wrapper" id="wbx-gw-button-wrapper-0"></DIV><DIV style="height: 1px; width: 1px; bottom: 0px; right: 0px; "><EMBED src="http://cdn.widgetserver.com/syndication/flash/wrapper/quantcast.swf" width="1" height="1" type="application/x-shockwave-flash" allowscriptaccess="always" wmode="transparent" flashvars="id=5d89964a-4b41-4ffe-a841-354259224062" pluginspage="http://www.macromedia.com/go/getflashplayer"></DIV></DIV>
                <NOSCRIPT></NOSCRIPT>
            </DIV>
        </DIV>


        <DIV id="bodyColumn">
            <DIV class="section"><H2><A name="Web_Caching">Web Caching</A></H2>
<P>Ehcache provides a set of general purpose web caching filters in the <TT>ehcache-web</TT> module.</P>
<P>Using these can make an amazing difference to web application performance. A typical server can deliver 5000+ pages per second from the page cache. With built-in gzipping, storage and network transmission is highly efficient. Cache pages and fragments make excellent candidates for <TT>DiskStore</TT> storage, because the object graphs are simple and the largest part is already a <TT>byte[]</TT>.</P>
<DIV class="section"><H3><A name="SimplePageCachingFilter">SimplePageCachingFilter</A></H3>
<P>This is a simple caching filter suitable for caching compressable HTTP responses such as HTML, XML or JSON.</P>
<P>It uses a Singleton CacheManager created with the default factory method. Override to use a different CacheManager</P>
<P>It is suitable for:</P>
<UL><LI>complete responses i.e. not fragments.</LI>
<LI>A content type suitable for gzipping. e.g. text or text/html<P>For fragments see the SimplePageFragmentCachingFilter.</P>
</LI>
</UL>
</DIV>
<DIV class="section"><H3>Keys</H3>
<P>Pages are cached based on their key. The key for this cache is the URI followed by the query string. An example is <TT>/admin/SomePage.jsp?id=1234&amp;name=Beagle</TT>.</P>
<P>This key technique is suitable for a wide range of uses. It is independent of hostname and port number, so will work well in situations where there are multiple domains which get the same content, or where users access based on different port numbers.</P>
<P>A problem can occur with tracking software, where unique ids are inserted into request query strings. Because each request generates a unique key, there will never be a cache hit. For these situations it is better to parse the request parameters and override <TT>calculateKey(javax.servlet.http.HttpServletRequest)</TT> with an implementation that takes account of only the significant ones.</P>
</DIV>
<DIV class="section"><H3>Configuring the cacheName</H3>
<P>A cache entry in ehcache.xml should be configured with the name of the filter.</P>
<P>Names can be set using the init-param <I>code</I>cacheName<I>/code</I>, or by sub-classing this class and overriding the name.</P>
</DIV>
<DIV class="section"><H3>Concurent Cache Misses</H3>
<P>A cache miss will cause the filter chain, upstream of the caching filter to be processed. To avoid threads requesting the same key to do useless duplicate work, these threads block behind the first thread.</P>
<P>The thead timeout can be set to fail after a certain wait by setting the init-param <I>code</I>blockingTimeoutMillis<I>/code</I>. By default threads wait indefinitely. In the event upstream processing never returns, eventually the web server may get overwhelmed with connections it has not responded to. By setting a timeout, the waiting threads will only block for the set time, and then throw a <A name="alink_net.sf.ehcache.constructs.blocking.LockTimeoutException">@link net.sf.ehcache.constructs.blocking.LockTimeoutException</A>. Under either scenario an upstream failure will still cause a failure.</P>
</DIV>
<DIV class="section"><H3>Gzipping</H3>
<P>Significant network efficiencies, and page loading speedups, can be gained by gzipping responses.</P>
<P>Whether a response can be gzipped depends on:</P>
<UL><LI>Whether the user agent can accept GZIP encoding. This feature is part of HTTP1.1. If a browser accepts GZIP encoding it will advertise this by including in its HTTP header: All common browsers except IE 5.2 on Macintosh are capable of accepting gzip encoding. Most search engine robots do not accept gzip encoding.</LI>
<LI>Whether the user agent has advertised its acceptance of gzip encoding. This is on a per request basis. If they will accept a gzip response to their request they must include the following in the HTTP request header:<DIV class="source"><PRE>   Accept-Encoding: gzip</PRE>
</DIV>
<P>Responses are automatically gzipped and stored that way in the cache. For requests which do not accept gzip encoding the page is retrieved from the cache, ungzipped and returned to the user agent. The ungzipping is high performance.</P>
</LI>
</UL>
</DIV>
<DIV class="section"><H3>Caching Headers</H3>
<P>The <TT>SimpleCachingHeadersPageCachingFilter</TT> extends <TT>SimplePageCachingFilter</TT> to provide the HTTP cache headers: ETag, Last-Modified and Expires. It supports conditional GET.</P>
<P>Because browsers and other HTTP clients have the expiry information returned in the response headers, they do not even need to request the page again. Even once the local browser copy has expired, the browser will do a conditional GET.</P>
<P>So why would you ever want to use SimplePageCachingFilter, which does not set these headers? The answer is that in some caching scenarios you may wish to remove a page before its natural expiry. Consider a scenario where a web page shows dynamic data. Under Ehcache the Element can be removed at any time. However if a browser is holding expiry information, those browsers will have to wait until the expiry time before getting updated. The caching in this scenario is more about defraying server load rather than minimising browser calls.</P>
</DIV>
<DIV class="section"><H3>Init-Params</H3>
<P>The following init-params are supported:</P>
<UL><LI><TT>cacheName</TT> - the name in ehcache.xml used by the filter.</LI>
<LI><TT>blockingTimeoutMillis</TT> - the time, in milliseconds, to wait for the filter chain to return with a response on a cache miss. This is useful to fail fast in the event of an infrastructure failure.</LI>
</UL>
</DIV>
<DIV class="section"><H3>Reentrance</H3>
<P>Care should be taken not to define a filter chain such that the same <TT>CachingFilter</TT> class is reentered. The <TT>CachingFilter</TT> uses the <TT>BlockingCache</TT>. It blocks until the thread which did a get which results in a null does a put. If reentry happens a second get happens before the first put. The second get could wait indefinitely. This situation is monitored and if it happens, an IllegalStateException will be thrown.</P>
</DIV>
<DIV class="section"><H3><A name="SimplePageFragmentCachingFilter">SimplePageFragmentCachingFilter</A></H3>
<P>The SimplePageFragmentCachingFilter does everyting that SimplePageCachingFilter does, except it never gzips, so the fragments can be combined. There is variant of this filter which sets browser caching headers, because that is only applicable to the entire page.</P>
</DIV>
<DIV class="section"><H3>Example web.xml configuration</H3>
<DIV class="source"><PRE>&lt;web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
     http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd "
     version="2.5"&gt;

  &lt;filter&gt;
    &lt;filter-name&gt;CachePage1CachingFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;net.sf.ehcache.constructs.web.filter.SimplePageCachingFilter
    &lt;/filter-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;suppressStackTraces&lt;/param-name&gt;
      &lt;param-value&gt;false&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;cacheName&lt;/param-name&gt;
      &lt;param-value&gt;CachePage1CachingFilter&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/filter&gt;

  &lt;filter&gt;
    &lt;filter-name&gt;SimplePageFragmentCachingFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;net.sf.ehcache.constructs.web.filter.SimplePageFragmentCachingFilter
    &lt;/filter-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;suppressStackTraces&lt;/param-name&gt;
      &lt;param-value&gt;false&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;cacheName&lt;/param-name&gt;
      &lt;param-value&gt;SimplePageFragmentCachingFilter&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/filter&gt;

  &lt;filter&gt;
    &lt;filter-name&gt;SimpleCachingHeadersPageCachingFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;net.sf.ehcache.constructs.web.filter.SimpleCachingHeadersPageCachingFilter
    &lt;/filter-class&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;suppressStackTraces&lt;/param-name&gt;
      &lt;param-value&gt;false&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
      &lt;param-name&gt;cacheName&lt;/param-name&gt;
      &lt;param-value&gt;CachedPage2Cache&lt;/param-value&gt;
    &lt;/init-param&gt;

  &lt;/filter&gt;

  &lt;!-- This is a filter chain. They are executed in the order below.
  Do not change the order. --&gt;
  &lt;filter-mapping&gt;
    &lt;filter-name&gt;CachePage1CachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/CachedPage.jsp&lt;/url-pattern&gt;
    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;
    &lt;dispatcher&gt;INCLUDE&lt;/dispatcher&gt;
    &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;
  &lt;/filter-mapping&gt;

  &lt;filter-mapping&gt;
    &lt;filter-name&gt;SimplePageFragmentCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/include/Footer.jsp&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;

  &lt;filter-mapping&gt;
    &lt;filter-name&gt;SimplePageFragmentCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/fragment/CachedFragment.jsp&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;

  &lt;filter-mapping&gt;
    &lt;filter-name&gt;SimpleCachingHeadersPageCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/CachedPage2.jsp&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;
</PRE>
</DIV>
<P>An ehcache.xml configuration file, matching the above would then be:</P>
<DIV class="source"><PRE>&lt;Ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="../../main/config/ehcache.xsd"&gt;

    &lt;diskStore path="java.io.tmpdir"/&gt;


    &lt;defaultCache
            maxElementsInMemory="10"
            eternal="false"
            timeToIdleSeconds="5"
            timeToLiveSeconds="10"
            overflowToDisk="true"
            /&gt;



    &lt;!-- Page and Page Fragment Caches --&gt;

    &lt;cache name="CachePage1CachingFilter"
           maxElementsInMemory="10"
           eternal="false"
           timeToIdleSeconds="10000"
           timeToLiveSeconds="10000"
           overflowToDisk="true"&gt;
    &lt;/cache&gt;

    &lt;cache name="CachedPage2Cache"
           maxElementsInMemory="10"
           eternal="false"
           timeToLiveSeconds="3600"
           overflowToDisk="true"&gt;
    &lt;/cache&gt;

    &lt;cache name="SimplePageFragmentCachingFilter"
           maxElementsInMemory="10"
           eternal="false"
           timeToIdleSeconds="10000"
           timeToLiveSeconds="10000"
           overflowToDisk="true"&gt;
    &lt;/cache&gt;

    &lt;cache name="SimpleCachingHeadersTimeoutPageCachingFilter"
           maxElementsInMemory="10"
           eternal="false"
           timeToIdleSeconds="10000"
           timeToLiveSeconds="10000"
           overflowToDisk="true"&gt;
    &lt;/cache&gt;

&lt;/ehcache&gt;
</PRE>
</DIV>
</DIV>
<DIV class="section"><H3>CachingFilter Exceptions</H3>
<P>Additional exception types have been added to the Caching Filter.</P>
<DIV class="section"><H4><A name="FilterNonReentrantException">FilterNonReentrantException</A></H4>
<P>Thrown when it is detected that a caching filter's doFilter method is reentered by the same thread. Reentrant calls will block indefinitely because the first request has not yet unblocked the cache. Nasty.</P>
</DIV>
<DIV class="section"><H4><A name="AlreadyGzippedException">AlreadyGzippedException</A></H4>
<P>The web package performs gzipping operations. One cause of problems on web browsers is getting content that is double or triple gzipped. They will either get gobblydeegook or a blank page. This exception is thrown when a gzip is attempted on already gzipped content.</P>
</DIV>
<DIV class="section"><H4><A name="ResponseHeadersNotModifiableException">ResponseHeadersNotModifiableException</A></H4>
<P>A gzip encoding header needs to be added for gzipped content. The HttpServletResponse#setHeader() method is used for that purpose. If the header had already been set, the new value normally overwrites the previous one. In some cases according to the servlet specification, setHeader silently fails. Two scenarios where this happens are:</P>
<UL><LI>The response is committed.</LI>
<LI>RequestDispatcher#include method caused the request.</LI>
</UL>
</DIV>
</DIV>
</DIV>

        </DIV>

        <DIV id="Footer">     
                    2003-2010
        
                    Terracotta, Inc.
                     </DIV>


    </DIV>
</DIV>


<SCRIPT src="./Ehcache - Web Caching_files/elqCfg.js"></SCRIPT>
<SCRIPT type="text/javascript" language="JavaScript" src="./Ehcache - Web Caching_files/elqImg.js"></SCRIPT><LAYER hidden="true"><IMG src="./Ehcache - Web Caching_files/svrGP.asp" border="0" width="1" height="1"></LAYER>



<SCRIPT type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</SCRIPT><SCRIPT src="./Ehcache - Web Caching_files/ga.js" type="text/javascript"></SCRIPT>
<SCRIPT type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-3138913-3");
pageTracker._trackPageview();
} catch(err) {}</SCRIPT>

            
</BODY></HTML>